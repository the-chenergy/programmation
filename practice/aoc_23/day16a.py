from ipython_startup.imports import *

inp_o = r'''\...|....||/............\.......-.......................\............./..........--......................./...
.......-..........................................-..-......../....../........................\...............
............/....\................-................-....................|..................\..../.............
.............|.\.................\.................|..................|..-........-...................-\......
..|...................|.....|......................./|...../......-................/.-..|.........\...........
.|......-..........\....../....\............\........../..\....|......................................-.......
....\....|/......../............\..............................-....../\|..-..\../.........\..\|..............
.........-..........-.........../...................-...........|....|\.......................................
.....|........................-......./...\../......\./.|................\......|.-...-........|.|/\..........
././............|............|...........\.....\..../...|....|...-.....|..............|................-......
................/../....\..........\......-....................-../............../........../-....\...........
......|........-................/........-......./........|......-\.............../........../.....|..........
-\.\......|...........//...\-.../..\..-..\.............................../............../.\-.-.......\........
.\..-...|./......./..............................\.................-....\../.................\..../...........
-....../......|....-...||...|.................../...-........-................|.......-/......\\...|..........
...../.........\..............\.................\..|....../....\....../.-\.....................|..\...........
\|..................\................-........./.......|...........\...../.................../................
..................../......\..........\..-...............\........-......................................|-...
................-................../.................................................-..................\-....
..\...................|....../........................./....-..........|.....................-................
..............-...................................\...............|./...-../.-|........||.....................
...........................././...|..........\............|...-....-..../.\\.......\...-.........\......../...
....\........................\..........-............\/...........|..-..\.....................................
..../.........../-\..\.........................|.........-........................|...........................
...|./..\...............................\....................../..............................................
..-.................\....|......-...-.........\-|..........\.-......|.....\.\....|......................|.....
......-.........\.....|..............-......................\.\...|\.....-..-..../............................
.....-..././......\|............................\.-.....................-.....................................
/-....................................-....................../.................................../.........\\.
.........|./...................................-..........|..\...\........../\.....\.....|...\.....|../..|....
............|.....................-.....................--.|-............................\|......../.|.....-..
-......\.........................\........|.\......../....||..||....................-........|.-.-............
................././/|............../..\.........-|.....-...|....|.......................-.......|............
|......|....../..............-............/........................-........\....\....|...../..............-..
.............//..../.......-........\.............|...../............................/........\......|........
...................-......-..........\..............\..............................\...................\......
...............\./......|.-...................-.|.........\.............../................/..................
.\..........-........|....................-..................||...........|...................................
....................\......../.........|............-...........-.........\..............-.-......../...\.....
........-.........|............\/.................-./.............-.......\...................-...............
....................-...............-./.................|............./.......\.............\........./\......
......\...............|........-/..................\.............../|.......\.|..............--..|.....|......
......\...\.....././.........\||.............................|....\.\.............../....-..|/........-.......
....../...../.................\...........|./.......|...\./....-...\........../.\......./..........-........\.
..................\..../....|................................................................|.....|....-.....
|..............................\......-................/|./-......./...........\........-.................|...
.\..|\....-..............-..|...........\........|....|..|........./.................................../......
...../...|..||.....\.--..........-....../............\..\.....|./..\....................\|......./............
.......\...|......-.......|..../......\..\/.|./.\..........|....|..............-.......................|...../
..............-...........\..\../...................\.........|.|....../..-/..............-...................
.......-.......\..../................................................|...../....|................|...-........
......................./........................|..\...|...-..-.........../....../.......-....|........../....
.......|..................................-.....\-./.\.........................\..../....-...|................
........../.../........./...........-.......|......./.-.........................\...\-.....................-..
..........\.\.............|........\..|........./.................../...........\.................\.../.......
....................-...|......|................../--.-.............-......................./.................
......./.........|......./../.....................-....//..|..............-..|.............\............\.....
...|...........-........................../.-..\............................\...|................\.//.......\.
../.....\..\.......-.............../.....|../.......................\-.................../.......-|/..........
......\.....................|.....\.............-.....\........../..........\.....-............|....\...-.....
...../.....................-|...\..-......./.............../.|..../................\..-...........\........./.
......|..\...........................\.........../.-............|....................-....|-.......-....\.....
........................................./.......|......-../../.............../....................|..........
........\.....|....../.......\.........../....../....-.........-.............||\...................-...|......
...........|.................\..\.............|...............\.....|..............................|..........
............|....../\....\..../.................\.-./......../\|../|..........................................
........................................................-|....................\....|.............|..-.........
/.|.............\\......\......./\.....................|.../.....................-...-.........../.-.....\....
.........................\/....-...\......./......-...........................--..|........\-..../............
.............-|...\........./..\........../..../..-.......\\.............................../.......|..../|....
....-...../......|.................|........-.......|.....|.../........-.....\.../..\.................../.....
.............../................|...........\............/-..|......../............-./.-./...............-....
.....\............|..\...............\..............\\.....-......./|....|.....--../...-..............\.......
................|............../................/......./............-..-.................-....||......./....\
.\..............\................|.......|.............|.........\|........\....-..../.............\..\/......
./.....\.......|......|.\..|.../.............-......\...............................-......\......\...........
.....|...../........../.......|.......................-.-.....\..................\............/....--./..-....
....................|..............-.\\......\..........\.....\.-.../.-.......-.......-.............\......-..
........./...................|.../....\...|...............|./../...-.........\-.................-.............
....................../.....\....-.\.............|............-......\.........\......\.......................
................\..\...|....-./..............-...\\.........\..........|......-.|/./.|..........\.\......../..
......\........-.............-/.............../...............................-.............|..........|/.....
....|.......-|...................................../.........\................./..........................\...
....\.......\\........-....\........\....\.............\............\........./........................\......
../.............................................................-......\..............|...................../.
............/../.........................\................................................../...-.............
.\........................\/.-...................-.......-...............|.....................-..............
./........................|.|/................\..............././..................................|.-........
............/........-..-..........|..............-........\../.|...\............................../..........
............\/......-.........\\............-.....................\..........\....................|..../..../.
..........\.../.....\.....................-..\..\.|..|....../-..|......-...|............-.....................
......................-........\.........-......................|..........-..................................
.|................\......-...........|.../....../............................................/......../...|../
.........-..........\...-...-................\............/..-....|\..............-.......\.|..-.../-.........
..|....../......./../-.............../....-......|-................................./......-...-...........-..
.............../............../....-....\......../.\../...................-............../\............|.\.|..
..|....\................-.....|.......................|\......................\.\..-...-..-...........|.......
.......................|......................\.../......|.................-..../..-..-.\....\................
..........................................-..........|-......................./-............-.................
..../...../....\.|........................................././.../...........................\................
......./...................................-............|-./.-.........\.|.../.-//...................-........
/......................|............|/.............../-..............-...............|.......|......|...|.....
....|.....-....-.....................\../..-...................\........./.../................./......-.......
........................\..............................-.\.-...|..................../............./.....-..../
......-.-...-........-.......\........../......|.........|..................../.....\./.....--...............|
.........-/...............-\...\..........\................|........./.../........\.|......|..................
..|/.................../......................................................../.....\..|.....|......-....-..
......................./......................\.........-./......................-............................
.....-.|.\................-............................|.............-........................../....-........
..../..|..|.\....|....\.................\.........|...-..-................/......|............/..\..........|.'''

inp_s = r'''.|...\....
|.-.\.....
.....|-...
........|.
..........
.........\
..../.\\..
.-.-/..|..
.|....-|.\
..//.|....'''

sam = 0
# sam = 0x0000000000000001
inp = inp_s if sam else inp_o

g = inp.splitlines()
h = len(g)
w = len(g[0])

q = [(0, -1, 0, 1)]
seen = set()
seen_g = set()
while q:
    y, x, dy, dx = q.pop()
    if (y, x, dy, dx) in seen_g:
        continue
    seen_g.add((y, x, dy, dx))
    ny, nx = y + dy, x + dx
    if ny < 0 or ny >= h or nx < 0 or nx >= w:
        continue
    seen.add((ny, nx))
    if g[ny][nx] == '|':
        if dx:
            dx = 0
            q.append((ny, nx, -1, 0))
            q.append((ny, nx, 1, 0))
            continue
    elif g[ny][nx] == '-':
        if dy:
            dy = 0
            q.append((ny, nx, 0, -1))
            q.append((ny, nx, 0, 1))
            continue
    elif g[ny][nx] == '\\':
        dy, dx = dx, dy
    elif g[ny][nx] == '/':
        dy, dx = -dx, -dy
    q.append((ny, nx, dy, dx))

print(len(seen))
